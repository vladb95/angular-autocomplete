function directiveFunc(e){return{restrict:"E",replace:!0,scope:{autoData:"=",sourceLink:"=",acTitle:"=",color:"=",inputModel:"=ngModel"},link:function(t,n,o){function a(e){for(var t,n=e.parent(),o=n.children(),a=1;a<o.length;a++)o[a]===e[0]&&(t=o[a-1]);return t}n.find("input").bind("blur",function(){e(function(){t.showListFlag=!1},200)}),n.find("input").on("keydown",function(e){var o=null;if(13===e.keyCode&&angular.element(n.children()[2].querySelector(".collection-item.active")).triggerHandler("click"),40===e.keyCode|38===e.keyCode&&(o=angular.element(n.children()[2]).children(),0!==o.length)){var i=n.children()[2].querySelector(".collection-item.active"),l=!0;angular.element(i).length>0&&(l=!1),i=angular.element(i).length>0?i:o[0],40===e.keyCode?l?angular.element(i).addClass("active").children("span").css("color","white"):(angular.element(i).removeClass("active").children("span").css("color",t.color),angular.element(i).next().addClass("active").children("span").css("color","white")):38===e.keyCode&&(angular.element(i).removeClass("active").children("span").css("color",t.color),angular.element(a(angular.element(i))).addClass("active").children("span").css("color","white"))}})},controller:autocompleteController,template:'<div ng-init="init()" ng-blur="changeShowVariable(false)" style="position:relative;"><style>\r\n  input[type=text]:focus:not([readonly])#auto-complete-id{\r\n    border-bottom:1px solid {{color}} !important;\r\n     box-shadow:0 1px 0 0 {{color}} !important;\r\n   }\r\n    #auto-complete-label.active{\r\n        color:{{color}} !important;\r\n       }\r\n    .collection-item.active\r\n    {\r\n      background-color:{{color}} !important;\r\n    }\r\n    </style><div class="input-field"><input type="text" id="auto-complete-id" ng-model="inputModel" ng-change="textChange()" ng-focus="changeShowVariable(true)"> <label id="auto-complete-label" for="auto-complete-id"><span ng-bind="acTitle"></span></label></div><div class="collection" ng-show="showList()" style="margin-top: -1%;position:absolute;width:100%;z-index:99;"><a class="collection-item" ng-repeat="item in getData()" ng-click="chooseItem(item)"><span style="color:{{color}};" ng-bind="item"></span></a></div></div>'}}function autocompleteController(e,t){e.inputModel="",e.dataType=0,e.dataToList=[],e.showListFlag=!1,e.init=function(){void 0!==e.autoData&&e.autoData.length>0?e.dataType=1:void 0!==e.sourceLink&&""!==e.sourceLink&&(e.dataType=2,e.dataToList=t.getData(e.sourceLink))},e.changeShowVariable=function(t){t?t=0!==e.dataType&&0!==e.inputModel.length:e.chooseItemFlag&&(t=!0),e.showListFlag=t},e.showList=function(){return e.showListFlag},e.getData=function(){if(e.dataToList=[],1===e.dataType)for(var t=0;t<e.autoData.length;t++)e.autoData[t].toLowerCase().indexOf(e.inputModel.toLowerCase())!==-1&&e.dataToList.push(e.autoData[t]);return 0===e.dataToList.length&&(e.showListFlag=!1),e.dataToList},e.chooseItem=function(t){e.inputModel=t,e.showListFlag=!1},e.textChange=function(){e.showListFlag=0!==e.dataType&&0!==e.inputModel.length},e.showTitle=function(){return void 0!==e.title&&0!==e.length}}function autoServiceFunction(e,t){var n={getData:function(n){var o=t.defer();return e.get(n).then(function(e){o.resolve(e)},function(e){o.reject()}),o.promise}};return n}angular.module("auto-complete",[]).directive("autoCompleteInput",directiveFunc),directiveFunc.$inject=["$timeout"],autocompleteController.$inject=["$scope","autoService"],angular.module("auto-complete").service("autoService",autoServiceFunction),autoServiceFunction.$inject=["$http","$q"];